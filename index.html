<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="monetag" content="c3fbbf4ea8a4848ef66d5dd702476411">
  <title>Streaming Video Premium</title>
  
  <script>(function(s){s.dataset.zone='10569387',s.src='https://al5sm.com/tag.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>
  
  <style>
    body, html {
      margin: 0; padding: 0;
      width: 100%; height: 100%;
      background-color: #000;
      display: flex; justify-content: center; align-items: center;
      overflow: hidden;
      font-family: sans-serif;
    }

    /* Container Fleksibel mengikuti orientasi video */
    .video-container {
      position: relative;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #000;
    }

    video {
      /* Menghilangkan tombol download di chrome/safari */
      max-width: 100%;
      max-height: 100%;
      width: auto;
      height: auto;
      display: none;
      outline: none;
    }

    /* Sembunyikan tombol download di browser berbasis webkit */
    video::-internal-media-controls-download-button {
        display:none;
    }
    video::-webkit-media-controls-enclosure {
        overflow:hidden;
    }
    video::-webkit-media-controls-panel {
        width: calc(100% + 30px); /* Geser keluar tombol download */
    }

    /* Overlay Iklan */
    #ad-overlay {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: 100;
      cursor: pointer;
      display: none;
      justify-content: center;
      align-items: center;
      background: rgba(0, 0, 0, 0.4); 
      backdrop-filter: blur(3px);
    }

    .play-button-visual {
      width: 80px; height: 80px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      display: flex; justify-content: center; align-items: center;
      border: 3px solid #fff;
      transition: transform 0.2s ease;
      box-shadow: 0 0 20px rgba(0,0,0,0.5);
    }
    
    .play-button-visual::after {
      content: '';
      border-style: solid;
      border-width: 15px 0 15px 25px;
      border-color: transparent transparent transparent white;
      margin-left: 5px;
    }

    .loader {
      border: 4px solid #333;
      border-top: 4px solid #007AFF;
      border-radius: 50%;
      width: 50px; height: 50px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    #error-msg { color: #ff4444; position: absolute; text-align: center; width: 90%; top: 50%; transform: translateY(-50%); }
  </style>
</head>
<body>

  <div class="video-container">
    <div id="loader-box" style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);">
        <div class="loader"></div>
    </div>

    <!-- Tombol Iklan Lapisan Atas (Akan Muncul Berulang Kali) -->
    <div id="ad-overlay">
        <div class="play-button-visual"></div>
    </div>

    <!-- Video dengan proteksi download -->
    <video 
      id="video-player" 
      controls 
      controlsList="nodownload noplaybackrate" 
      disablePictureInPicture
      preload="auto" 
      playsinline>
    </video>
    
    <div id="error-msg"></div>
  </div>

  <script>
    const JSON_FILE = 'Video.json';
    const ADS_URL = 'https://otieu.com/4/9938705';
    
    const COOLDOWN_AD = 5000; // Iklan bisa muncul lagi setelah 5 detik jika di-pause
    let lastAdTime = 0;

    async function initPlayer() {
      const player = document.getElementById('video-player');
      const overlay = document.getElementById('ad-overlay');
      const loader = document.getElementById('loader-box');
      const errorMsg = document.getElementById('error-msg');

      const path = window.location.search || window.location.pathname;
      const videoId = path.replace(/[/?]/g, '').replace(/^e/, '');

      if (!videoId) {
        loader.style.display = 'none';
        errorMsg.innerText = "ID Video tidak ditemukan di URL.";
        return;
      }

      try {
        const response = await fetch(JSON_FILE);
        const data = await response.json();
        const videoData = data.find(v => v.id === videoId);

        if (videoData && videoData.Url) {
          player.src = videoData.Url;
          
          player.oncanplay = () => {
            loader.style.display = 'none';
            player.style.display = 'block';
            showAdOverlay(); 
          };
        } else {
          throw new Error("Video tidak ditemukan dalam database.");
        }
      } catch (err) {
        loader.style.display = 'none';
        errorMsg.innerText = err.message;
      }

      function showAdOverlay() {
        overlay.style.display = 'flex';
      }

      // Logika KLIK IKLAN (Bisa berkali-kali)
      overlay.addEventListener('click', function() {
        window.open(ADS_URL, '_blank');
        player.play();
        overlay.style.display = 'none';
        lastAdTime = new Date().getTime();
      });

      // Munculkan iklan lagi setiap kali di-PAUSE
      player.addEventListener('pause', () => {
        const currentTime = new Date().getTime();
        // Hanya muncul jika sudah melewati cooldown agar tidak mengganggu saat buffering
        if (currentTime - lastAdTime > COOLDOWN_AD) {
            showAdOverlay();
        }
      });
    }

    initPlayer();

    // Proteksi tambahan: blokir klik kanan
    document.addEventListener('contextmenu', e => e.preventDefault());
  </script>
</body>
</html>      font-size: 14px;
    }

    .playlist-item {
      cursor: pointer;
      padding: 10px 15px;
      border-radius: 10px;
      transition: background 0.2s;
    }

    .playlist-item:hover {
      background: rgba(255, 255, 255, 0.15);
    }

    .playlist-active {
      background: rgba(255, 255, 255, 0.3);
      font-weight: 600;
    }
  </style>
</head>

<body>
  <header class="py-4 px-6 flex justify-between items-center shadow">
    <h1 class="text-2xl font-bold">ðŸŽ¬ STREAM ENAK</h1>
    <a href="https://videi.my.id/" class="bg-white text-blue-600 px-4 py-2 rounded-full font-semibold hover:bg-gray-200 transition">
      <i class="fas fa-upload mr-1"></i> Upload
    </a>
  </header>

  <main class="flex-grow px-4">
    <div class="video-container">
      <div class="loading-spinner" id="loading-spinner"></div>
      <video id="video-player" controls controlsList="nodownload noremoteplayback" disablePictureInPicture class="w-full h-auto rounded-xl">
        Browser tidak mendukung video tag.
      </video>
    </div>

    <div id="error-message" class="text-center text-red-300 mt-4 hidden"></div>

    <section class="max-w-3xl mx-auto mt-6 text-center">
      <h2 id="video-title" class="text-3xl font-bold mb-2">Judul Video</h2>
      <p id="video-description" class="text-white/80 mb-4">Deskripsi video akan muncul di sini.</p>
      <button id="share-button" class="bg-white text-blue-600 px-5 py-2 rounded-full font-semibold hover:bg-gray-200 transition">
        <i class="fas fa-share-alt mr-2"></i>Share
      </button>
    </section>

    <section class="max-w-3xl mx-auto mt-8 bg-white/10 rounded-2xl p-4">
      <h3 class="text-xl font-bold mb-3">ðŸŽµ Playlist Lainnya</h3>
      <div id="playlist" class="space-y-2"></div>
    </section>
  </main>

  <footer>
    &copy; 2026 Videy. All rights reserved.
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', async () => {
   const jsonUrl = "https://raw.githubusercontent.com/liwa22/json/main/Video.json?cacheBust=" + Date.now();
      const player = document.getElementById('video-player');
      const spinner = document.getElementById('loading-spinner');
      const title = document.getElementById('video-title');
      const desc = document.getElementById('video-description');
      const error = document.getElementById('error-message');
      const playlistContainer = document.getElementById('playlist');
      const shareButton = document.getElementById('share-button');
      let videos = [];
      let currentVideoId = '';

      // Dapatkan video ID dari URL
      let urlPath = window.location.pathname;
      if (urlPath.startsWith('/')) urlPath = urlPath.substring(1);
      if (urlPath.startsWith('e/')) currentVideoId = urlPath.substring(2);
      else currentVideoId = urlPath;

      spinner.style.display = 'block';

      try {
        const response = await axios.get(jsonUrl, { timeout: 10000 });
        videos = response.data;

        if (!Array.isArray(videos) || videos.length === 0) throw new Error('Data JSON kosong.');

        const found = videos.find(v => v.id === currentVideoId) || videos[0];
        loadVideo(found);

        // Buat playlist otomatis
        videos.forEach(v => {
          const item = document.createElement('div');
          item.className = 'playlist-item text-white';
          item.textContent = v.Judul || 'Tanpa Judul';
          item.onclick = () => loadVideo(v);
          if (v.id === found.id) item.classList.add('playlist-active');
          playlistContainer.appendChild(item);
        });
      } catch (err) {
        error.textContent = 'Gagal memuat video. Cek koneksi atau file JSON.';
        error.classList.remove('hidden');
      } finally {
        spinner.style.display = 'none';
      }

      function loadVideo(video) {
  if (!video) return;
  
  // Update player dan teks
  player.src = video.Url;
  title.textContent = video.Judul || 'Tanpa Judul';
  desc.textContent = video.Description || 'Tidak ada deskripsi.';
  error.classList.add('hidden');
  
  // Update URL agar setiap video punya link unik
  const newUrl = `/e/${video.id}`;
  window.history.pushState({ videoId: video.id }, video.Judul, newUrl);
  
  // Update playlist aktif
  document.querySelectorAll('.playlist-item').forEach(item => item.classList.remove('playlist-active'));
  const active = Array.from(document.querySelectorAll('.playlist-item'))
    .find(i => i.textContent === video.Judul);
  if (active) active.classList.add('playlist-active');
}

// Jika user tekan tombol Back / Forward di browser
window.addEventListener('popstate', (event) => {
  const id = event.state?.videoId;
  if (id) {
    const video = videos.find(v => v.id === id);
    if (video) loadVideo(video);
  }
});

      // Tombol Share
      shareButton.addEventListener('click', async () => {
        const currentUrl = window.location.href;
        try {
          await navigator.clipboard.writeText(currentUrl);
          const original = shareButton.innerHTML;
          shareButton.innerHTML = '<i class="fas fa-check mr-2"></i>Tersalin!';
          setTimeout(() => shareButton.innerHTML = original, 2000);
        } catch {
          alert('Gagal menyalin link. Salin manual: ' + currentUrl);
        }
      });

      // Anti klik kanan
      player.addEventListener('contextmenu', e => e.preventDefault());
    });
  </script>
</body>
</html>
